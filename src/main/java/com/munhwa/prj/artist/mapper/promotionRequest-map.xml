<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.munhwa.prj.artist.mapper.PromotionRequestMapper">

  <resultMap type="com.munhwa.prj.artist.vo.PromotionRequestVO" id="requestMap">
    <id property="memberId" column="member_id"/>
    <result property="identify" column="identify"/>
    <result property="artwork" column="artwork"/>
    <result property="status" column="stauts"/>
    <result property="fileGroupId" column="file_group_id"/>
  </resultMap>

  <select id="selectPromotionRequestList" resultMap="requestMap">
    SELECT *
    FROM promotion_request
    ORDER BY created_at DESC
  </select>

  <select id="selectPromotionRequest" resultMap="requestMap"
    parameterType="com.munhwa.prj.artist.vo.PromotionRequestVO">
    SELECT *
    FROM promotion_request
    WHERE id = #{member_id}
  </select>

  <insert id="insertPromotionRequest" parameterType="com.munhwa.prj.artist.vo.PromotionRequestVO">
    INSERT INTO promotion_request(member_id, identify, artwork, status, file_group_id)
    VALUES (#{memberId}, #{identify}, #{artwork}, #{status}, #{fileGroupId})
  </insert>

  <update id="updatePromotionRequest">
    update promotion_request
    <set>
      <if test="artwork != null">artwork = #{artwork}</if>
      <if test="artwork != null">status = #{status}</if>
    </set>
    where memberId = #{memberId}
  </update>

  <delete id="deletePromotionRequest" parameterType="com.munhwa.prj.artist.vo.PromotionRequestVO">
    DELETE
    FROM promotion_request
    WHERE id = #{memeber_id}
  </delete>
</mapper>