<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.munhwa.prj.common.file.mapper.UploadFileMapper">
  <resultMap type="com.munhwa.prj.common.file.entity.UploadFileVO" id="fileMap">
    <id property="id" column="id"/>
    <result property="oname" column="oname"/>
    <result property="sname" column="sname"/>
    <result property="fileGroupId" column="file_Group_Id"/>
    <result property="extension" column="extension"/>
  </resultMap>

  <insert id="insertUploadFile" statementType="CALLABLE" parameterType="map">
		<![CDATA[
    { call SAVE_FILE_PROC(
      #{v_oname, mode=IN, jdbcType=VARCHAR, javaType=string},
      #{v_sname, mode=IN, jdbcType=VARCHAR, javaType=string},
      #{v_id, mode=IN, jdbcType=INTEGER, javaType=int},
      #{v_proc_type, mode=IN, jdbcType=VARCHAR, javaType=string},
      #{v_group_id, mode=OUT, jdbcType=VARCHAR, javaType=string}
      )}
    ]]>
	</insert>
  <update id="updateUploadFile" parameterType="com.munhwa.prj.common.file.entity.UploadFileVO">
    update uploaded_files
    <set>
      <if test="oname != null and sname != null">oname = #{oname}</if>
      <if test="oname != null and sname != null">sname = #{sname}</if>
    </set>
    where;
  </update>
  <delete id="deleteUploadFile" parameterType="com.munhwa.prj.common.file.entity.UploadFileVO">
    DELETE uploaded_files
    WHERE id = #{id}
  </delete>
  <delete id="deleteUploadFileByGroupId" parameterType="string">
    DELETE uploaded_files
    WHERE file_group_id = #{fileGroupId}
  </delete>
  <select id="selectById" parameterType="int"
    resultType="com.munhwa.prj.common.file.entity.UploadFileVO">
    SELECT *
    FROM uploaded_files
    WHERE id = #{id}
  </select>
  <select id="selectByGroupId" parameterType="string"
    resultType="com.munhwa.prj.common.file.entity.UploadFileVO">
    SELECT *
    FROM uploaded_files
    WHERE file_group_id = #{id}
  </select>
</mapper>