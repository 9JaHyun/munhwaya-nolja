<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.munhwa.prj.common.mapper.UploadFileMapper">
  <insert id="insertUploadFile" statementType="CALLABLE" parameterType="map">
    { call save_file_proc (
      #{v_oname, mode=IN, jdbcType=VARCHAR, javaType=string},
      #{v_sname, mode=IN, jdbcType=VARCHAR, javaType=string},
      #{v_proc_type, mode=IN, jdbcType=VARCHAR, javaType=string},
      #{v_group_id, mode=OUT, jdbcType=VARCHAR, javaType=string}
      )}
  </insert>

  <update id="updateUploadFile" parameterType="com.munhwa.prj.common.entity.UploadFileVO">
    update uploaded_files
    <set>
      <if test="oname != null and sname != null">oname = #{oname}</if>
      <if test="oname != null and sname != null">sname = #{sname}</if>
    </set>
    where;
  </update>
  <delete id="deleteUploadFile" parameterType="com.munhwa.prj.common.entity.UploadFileVO">
    DELETE uploaded_files
    WHERE id = #{id}
  </delete>
  <delete id="deleteUploadFileByGroupId" parameterType="string">
    DELETE uploaded_files
    WHERE file_group_id = #{fileGroupId}
  </delete>
  <select id="selectById" parameterType="int"
    resultType="com.munhwa.prj.common.entity.UploadFileVO">
    SELECT *
    FROM uploaded_files
    WHERE id = #{id}
  </select>
  <select id="selectByGroupId" parameterType="string"
    resultType="com.munhwa.prj.common.entity.UploadFileVO">
    SELECT *
    FROM uploaded_files
    WHERE file_group_id = #{id}
  </select>
</mapper>